@import '../vars';
@import '../mixins';

$xui-datepicker-day-size: $xui-control-size-standard;

@mixin xui-datepicker-highlight-size-left() {
  border-radius: $xui-datepicker-day-size / 2 0 0 $xui-datepicker-day-size / 2;
  width: $xui-datepicker-day-size / 2;
}
@mixin xui-datepicker-highlight-size-right() {
  border-radius: 0 $xui-datepicker-day-size / 2 $xui-datepicker-day-size / 2 0;
  width: $xui-datepicker-day-size / 2;
}

.#{$ns}-datepicker {
  border: none;
  font-size: 0.9375rem;
  padding-bottom: $xui-s-xsmall;
  position: relative;
  width: 100%;
}

.#{$ns}-datepicker--header {
  @include xui-flex-children(center, space-between);
  flex-flow: row nowrap;
  padding: $xui-s-small;
}

.#{$ns}-datepicker--monthselect-layout {
  right: 0;
  text-align: right;
  text-align-last: right;
}

.#{$ns}-datepicker--monthoption-layout {
  text-align: left;
  text-align-last: left;
}

.#{$ns}-datepicker--prevbutton {
  @include xui-margin-left($xui-s-2xsmall);
  min-width: $xui-datepicker-day-size;
}

.#{$ns}-datepicker--nextbutton {
  @include xui-margin-right($xui-s-2xsmall);
  min-width: $xui-datepicker-day-size;
}

// This should be deprecated in favour of adding a xui-u-hidden-visually class on the button SVG
.#{$ns}-datepicker--button-is-disabled {
  cursor: default;
  &::before {
    color: $xui-datepicker-button-disabled-color;
  }
}

.#{$ns}-datepicker--heading {
  line-height: $xui-line-height-compact;
  position: relative;
}

.#{$ns}-datepicker--heading-month {
  font-weight: $xui-font-weight-emphasis;
}

.#{$ns}-datepicker--yearselect-layout {
  left: 0;
  text-align: left;
}

.#{$ns}-datepicker--heading--selection {
  pointer-events: none;
}

.#{$ns}-datepicker--heading-select {
  appearance: none;
  background: none;
  border: none;
  cursor: pointer;
  font-family: $xui-font-family;
  font-size: 1em;
  height: 100%;
  left: 0;
  opacity: 0;
  position: absolute;
  top: 0;
  width: 100%;
}
.#{$ns}-datepicker--heading-select-has-focus {
  @include xui-state-focus-shadow;
}

.#{$ns}-datepicker--heading-label.#{$ns}-button-standard {
  position: static;
  user-select: none;

  &:hover {
    cursor: default;
  }
}

.#{$ns}-datepicker--heading-label-icon {
  margin-left: $xui-s-xsmall;
  vertical-align: middle;
}

.#{$ns}-datepicker--heading--selection-bold {
  font-weight: bold;
}

.#{$ns}-datepicker--heading-dates {
  @include xui-flex-children;

  :first-child .#{$ns}-button {
    border-bottom-right-radius: 0;
    border-right: none;
    border-top-right-radius: 0;
  }

  :last-child .#{$ns}-button {
    border-bottom-left-radius: 0;
    border-top-left-radius: 0;
  }
}

.#{$ns}-datepicker--body {
  border: 0;
  margin: 0;
  overflow: hidden;
  width: 100%;

  &:focus {
    outline: none;
  }
}

.#{$ns}-datepicker--week {
  border-bottom: 1px solid transparent;
  border-top: 1px solid transparent;
  display: flex;
  justify-content: space-between;
}

.#{$ns}-datepicker--weekdays {
  border-bottom: $xui-border-muted;
  display: flex;
  justify-content: space-between;
  margin-bottom: $xui-s-xsmall;
  padding-bottom: $xui-s-xsmall;
  padding-left: $xui-s-xsmall;
  padding-right: $xui-s-xsmall;
}

.#{$ns}-datepicker--day {
  border: 0;
  box-sizing: content-box;
  cursor: pointer;
  display: flex;
  flex: 1 0 auto;
  font-size: inherit;
  height: $xui-datepicker-day-size;
  justify-content: center;
  line-height: 1;
  position: relative;
  text-align: center;
  user-select: none;
  width: $xui-datepicker-day-size;
  z-index: $xui-z-index-html;

  &::after,
  &::before {
    content: '';
    height: 100%;
    position: absolute;
    top: 0;
    width: 50%;
  }

  &::after {
    left: 50%;
  }
  &::before {
    right: 50%;
  }

  &:active,
  &:focus {
    outline: none;
  }

  &:first-of-type {
    padding-left: $xui-s-xsmall;
  }

  &:last-of-type {
    padding-right: $xui-s-xsmall;
  }
}
.#{$ns}-datepicker--day-selectable {
  &:not(.#{$ns}-datepicker--day-is-in-range) {
    &:active,
    &:focus {
      .#{$ns}-datepicker--day--time {
        background-color: $xui-datepicker-day-focus-bg-color;
      }
    }
  }
  &:not(.#{$ns}-datepicker--day-is-in-selected-range):active {
    .#{$ns}-datepicker--day--time {
      background-color: $xui-datepicker-day-bg-color;
    }
  }
}

.#{$ns}-datepicker--day--time {
  @include xui-flex-children;
  background: transparent;
  border-radius: $xui-radius-circle;
  height: $xui-datepicker-day-size;
  pointer-events: none;
  position: relative;
  width: $xui-datepicker-day-size;
  z-index: $xui-z-index-body;
}

.#{$ns}-datepicker--weekday {
  @include xui-text-small;
  color: $xui-datepicker-weekday-color;
  cursor: default;
  font-weight: normal;
  text-align: center;
  text-decoration: none;
  user-select: none;
}

.#{$ns}-datepicker--weekdaywrapper {
  flex: 1;
  text-align: center;
}

.#{$ns}-datepicker--day-is-othermonth {
  color: $xui-datepicker-othermonth-color;
}

.#{$ns}-datepicker--day-is-today {
  color: $xui-datepicker-today-color;
  font-weight: bold;
}

.#{$ns}-datepicker--day-is-selected {
  &:not(.#{$ns}-datepicker--day-is-selected-middle) {
    // prefers-reduced-motion can be ignored here because this instance is not a motion animation
    // stylelint-disable-next-line a11y/media-prefers-reduced-motion
    .#{$ns}-datepicker--day--time {
      background: $xui-datepicker-selected-bg-color;
      box-shadow: 0 0 0 0 $xui-datepicker-selected-shadow-color;
      color: $xui-datepicker-selected-color;
      transition: box-shadow $xui-motion-speed-fast $xui-motion-curve-standard;
    }
  }
  &:focus {
    .#{$ns}-datepicker--day--time {
      background: $xui-datepicker-selected-focus-bg-color;
    }
  }
  &:active,
  &:active:focus {
    .#{$ns}-datepicker--day--time {
      box-shadow: 0 0 0 2px $xui-datepicker-selected-active-shadow-color;
    }
  }
}

.#{$ns}-datepicker--day-is-disabled {
  cursor: not-allowed;
  .#{$ns}-datepicker--day--time {
    color: $xui-datepicker-disabled-color;
  }
}

.#{$ns}-datepicker--day-is-hovered-start {
  &::before {
    background: $xui-datepicker-hover-bg-color;
    @include xui-datepicker-highlight-size-left();
  }
  &::after {
    background: $xui-datepicker-hover-bg-color;
  }
}

.#{$ns}-datepicker--day-is-hovered-middle {
  &::before {
    background: $xui-datepicker-hover-bg-color;
  }
  &::after {
    background: $xui-datepicker-hover-bg-color;
  }
}

.#{$ns}-datepicker--day-is-hovered-end {
  &::before {
    background: $xui-datepicker-hover-bg-color;
  }
  &::after {
    background: $xui-datepicker-hover-bg-color;
    @include xui-datepicker-highlight-size-right();
  }
}

.#{$ns}-datepicker--day-is-selected-start {
  &::before {
    background: $xui-datepicker-selected-bg-color;
    @include xui-datepicker-highlight-size-left();
  }
  &::after {
    background: $xui-datepicker-selected-bg-color;
  }
  .#{$ns}-datepicker--day--time {
    color: $xui-datepicker-selected-color;
  }
}

.#{$ns}-datepicker--day-is-selected-middle {
  &::before {
    background: $xui-datepicker-selected-bg-color;
  }
  &::after {
    background: $xui-datepicker-selected-bg-color;
  }
  .#{$ns}-datepicker--day--time {
    color: $xui-datepicker-selected-color;
  }
}

.#{$ns}-datepicker--day-is-selected-end {
  &::before {
    background: $xui-datepicker-selected-bg-color;
  }
  &::after {
    background: $xui-datepicker-selected-bg-color;
    @include xui-datepicker-highlight-size-right();
  }
  .#{$ns}-datepicker--day--time {
    color: $xui-datepicker-selected-color;
  }
}

.#{$ns}-datepicker--day-is-selected-hovered-start {
  &::before {
    background: $xui-datepicker-hover-bg-color;
    @include xui-datepicker-highlight-size-left();
  }
  &::after {
    background: $xui-datepicker-hover-bg-color;
  }
}

.#{$ns}-datepicker--day-is-selected-hovered-end {
  &::before {
    background: $xui-datepicker-hover-bg-color;
  }
  &::after {
    background: $xui-datepicker-hover-bg-color;
    @include xui-datepicker-highlight-size-right();
  }
}
