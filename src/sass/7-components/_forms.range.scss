@import "../vars";
@import "../mixins";

/*
 * Custom styling for `<input type="range">`
 * After Ana Tudor:
 * https://codepen.io/thebabydino/pen/qVQLzm
 */

$xui-range-slider-height: 2px;
$xui-range-slider-thumb-diameter: $xui-s-xlarge;

@mixin xui-range-slider-track {
	background: $xui-range-slider-track-color;
	border: none;
	box-sizing: border-box;
	height: $xui-range-slider-height;
	width: 100%;
}

@mixin xui-range-slider-thumb {
	background: $xui-range-bg-color;
	border: 1px solid $xui-range-border-color;
	border-radius: 50%;
	box-sizing: border-box;
	height: $xui-range-slider-thumb-diameter;
	width: $xui-range-slider-thumb-diameter;
}

.#{$ns}-range-slider {
	-webkit-appearance: none;
	background: transparent;
	height: $xui-range-slider-thumb-diameter;
	margin: 0;
	padding: 0;
	width: 100%;

	&.#{$ns}-range-slider-is-invalid {
		&::-webkit-slider-thumb {
			border-color: $xui-range-slider-thumb-invalid-color;
		}
		&::-moz-range-thumb {
			border-color: $xui-range-slider-thumb-invalid-color;
		}
		&::-ms-thumb {
			border-color: $xui-range-slider-thumb-invalid-color;
		}
		&::-webkit-slider-runnable-track {
			background: $xui-range-slider-track-invalid-color;
		}

		&::-moz-range-track {
			background: $xui-range-slider-track-invalid-color;
		}

		&::-ms-track {
			background: $xui-range-slider-track-invalid-color;
			color: $xui-range-slider-track-invalid-color;
		}
	}

	&:disabled {
		cursor: not-allowed;
		&::-webkit-slider-thumb {
			background: $xui-range-slider-thumb-disabled-color;
		}
		&::-moz-range-thumb {
			background: $xui-range-slider-thumb-disabled-color;
		}
		&::-ms-thumb {
			background: $xui-range-slider-thumb-disabled-color;
		}
	}

	//	I’d normally alphabetise these browser-specific properties,
	//	but Edge accepts both `-ms-thumb` and `-webkit-slider-thumb` styles.
	//	Since Edge and Chrome position the thumb differently (of course),
	//	Chrome needs to come first so Edge’s `-ms-thumb` style will rule the day.

	&::-webkit-slider-runnable-track {
		@include xui-range-slider-track;
	}

	&::-moz-range-track {
		@include xui-range-slider-track;
	}

	&::-ms-track {
		@include xui-range-slider-track;
		color: $xui-range-slider-track-color;
	}

	&::-ms-fill-lower,
	&::-ms-fill-upper {
		background-color: $xui-range-slider-track-color;
	}

	&::-webkit-slider-thumb {
		@include xui-range-slider-thumb;
		-webkit-appearance: none;
		margin-top: ($xui-range-slider-height - $xui-range-slider-thumb-diameter) * 0.5;
	}

	&::-moz-range-thumb {
		@include xui-range-slider-thumb;
	}

	&::-ms-thumb {
		@include xui-range-slider-thumb;
		margin-top: 0;
	}

	&:hover:not(:disabled) {
		cursor: pointer;
	}

	&:focus {
		outline: none;
		&::-webkit-slider-thumb {
			box-shadow: $xui-shadow-focus;
		}

		&::-moz-range-thumb {
			box-shadow: $xui-shadow-focus;
		}

		&::-ms-thumb {
			box-shadow: $xui-shadow-focus;
		}
	}

	&:hover:not(:disabled):not(.#{$ns}-range-slider-is-invalid) {
		&::-webkit-slider-thumb {
			border-color: $xui-range-border-hover-color;
		}

		&::-moz-range-thumb {
			border-color: $xui-range-border-hover-color;
		}

		&::-ms-thumb {
			border-color: $xui-range-border-hover-color;
		}
	}

	&:focus:not(:disabled):not(.#{$ns}-range-slider-is-invalid) {
		&::-webkit-slider-thumb {
			border-color: $xui-range-border-focus-color;
		}

		&::-moz-range-thumb {
			border-color: $xui-range-border-focus-color;
		}

		&::-ms-thumb {
			border-color: $xui-range-border-focus-color;
		}
	}


	&:active:not(:disabled):not(.#{$ns}-range-slider-is-invalid) {
		&::-webkit-slider-thumb {
			border-color: $xui-range-border-active-color;
		}

		&::-moz-range-thumb {
			border-color: $xui-range-border-active-color;
		}

		&::-ms-thumb {
			border-color: $xui-range-border-active-color;
		}
	}
}
