@import "../tools/mixins";
@import "../settings/animation";
@import "../settings/colours";
@import "../settings/structure";

// Modals
//
// ### Behaviour
// * The modal has a semi-transparent mask to prevent the user from clicking on other elements on the page while the modal is open
// * If the modal can be closed (should be the case for most modals), it can be done in the following ways:
//   * Clicking the &times; inside the modal
//   * Pressing ESC while the modal is open
//   * Clicking on a button in the modal footer can optionally close the modal
//   * Clicking on the mask should not close the modal
// * TODO: Define behaviour for multiple modals
//
// ### Accessibility
// Adding a `dialog` role to the modal is usually not enough to make it accessible. The modal also needs to be labelled appropriately and focus around the modal needs to be managed.
//
// #### Labelling
//  * The `aria-labelledby` and `aria-describedby` attributes can be used to ensure the purpose of the modal is clear.
//
// #### Keyboard interaction
//  * When the modal is opened, the keyboard focus should be moved to a default focusable control with the modal. For example, this could be a button in the footer of the modal or the first element in a form within the modal.
//  * The main page content that the mask covers should be temporarily disabled and therefore not accessible by the keyboard while the modal is open.
//
// Markup:
//<div class="xui-mask">
//	<section class="xui-modal xui-modal-opened xui-modal-medium" role="dialog" aria-labelledby="modal-heading" aria-describedby="modal-text">
//		<header class="xui-modal--header xui-usercontent xui-padding-left-lg">
//			<h3 id="modal-heading" class="xui-text-panelheading">Smart Rule: Bank</h3>
//			<button type="button" class="xui-button xui-button-icon xui-button-icon-large xui-margin" title="Close" aria-label="Close">âœ•</button>
//		</header>
// 		<div class="xui-modal--body xui-padding-horizontal-lg">
//			<p id="modal-text">Select which items from your bank should be automatically allocated to which account</p>
//			<form class="xui-form">
//				<p class="xui-field">
//					<select aria-describedby="modal-text" class="xui-select">
//						<option>If items are negative</option>
//					</select>
//				</p>
//				<p class="xui-field">
//					<label class="xui-text-label" for="move-to">Move To</label>
//					<select id="move-to" class="xui-select">
//						<option>Current Liabilities</option>
//					</select>
//				</p>
//			</form>
//		</div>
//		<footer class="xui-modal--footer xui-actions xui-padding-lg">
//			<div class="xui-actions--primary xui-padding-left-sm">
//				<button type="button" class="xui-button xui-button-main">Done</button>
//			</div>
//			<div class="xui-actions--secondary">
//				<button type="button" class="xui-button xui-button-negative">Delete</button>
//			</div>
//		</footer>
//	</section>
//</div>
//
// Styleguide: Modals
.#{$ns}-mask {
	align-items: center;
	background-color: transparentize($xui-color-primary-text, 0.3);
	bottom: 0;
	display: flex;
	justify-content: center;
	left: 0;
	opacity: 0;
	pointer-events: none;
	position: fixed;
	right: 0;
	top: 0;
	transition: opacity $xui-transition-duration-medium $xui-easing-standard;
	z-index: 10;
}

.#{$ns}-modal-opened {
	opacity: 1;
	pointer-events: auto;
}

.#{$ns}-modal {
	background-color: $xui-color-panel;
	border-radius: $xui-radius;
	box-shadow: $xui-shadow-depth-3;
	max-height: calc(100vh - 2.5rem);	// Allows for minimum 20px margin at the top/bottom of modal
	max-width: calc(100vw - 2.5rem);	// Allows for minimum margin at the left/right of modal
	width: 360px;
}

.#{$ns}-modal-medium {
	width: 560px;
}

.#{$ns}-modal-large {
	width: 860px;
}

// Modal header
// -----------------------------------------------------------------------------

.#{$ns}-modal--header {
	align-content: stretch;
	display: flex;
	justify-content: space-between;
}

// Modal body
// -----------------------------------------------------------------------------

.#{$ns}-modal--body {
	max-height: 45vh;
	overflow-y: auto;

	// Because of how padding is handled in the context of an overflow, we can't
	// just add padding to the bottom of this container so that the content
	// doesn't push up to the edge.  Instead, I have to add margins to the inside
	// elements to push them away from the edges.
	// See: https://bugzilla.mozilla.org/show_bug.cgi?id=748518

	> *:first-child {
		margin-top: 20px;
	}

	> *:last-child {
		margin-bottom: 20px;
	}
}

// Modal footer
// -----------------------------------------------------------------------------

.#{$ns}-modal--footer {
}
