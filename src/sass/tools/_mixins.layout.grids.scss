@import "mixins.utilities";
@import "../vars";
@import "functions.decimals";

@mixin xui-column-width-generator($numberofcolumns, $columnpercentage, $gutter : 0) {

	@if $columnpercentage >= $numberofcolumns {
		width: 100%;
	} @else if(type-of($gutter) == number and $gutter > 0) {
		width: calc((100% / #{$numberofcolumns}) * #{$columnpercentage} - #{$gutter});
	} @else {
		width: calc((100% / #{$numberofcolumns}) * #{$columnpercentage});
	}

}

@mixin xui-column-responsive-generator($padded: false) {

	@for $i from $xui-layout-column-start through $xui-layout-columns {

		$suffix: "#{$i}-of-#{$xui-layout-columns}";
		$width: decimal-floor(100% / 12 * $i, 2);

		@if ($padded == false) {

			@include xui-breakpoint-medium {
				.#{$ns}-column-#{$suffix}-medium {
					float: left;
					width: #{$width};
				}
			}

			@include xui-breakpoint-wide {
				.#{$ns}-column-#{$suffix}-wide {
					float: left;
					width: #{$width};
				}
			}

		} @else {

			@include xui-breakpoint-medium {
				.#{$ns}-row-grid > .#{$ns}-column-#{$suffix}-medium {
					float: left;
					width: calc( (100% - (12/#{$i}) * #{$xui-s-large}) / 12 * #{$i} );
				}
			}

			@include xui-breakpoint-wide {
				.#{$ns}-row-grid > .#{$ns}-column-#{$suffix}-wide {
					float: left;
					width: calc( (100% - (12/#{$i}) * #{$xui-s-large}) / 12 * #{$i} );
				}
			}
		}
	}
}

@mixin xui-column-width-generator2($padded: false) {

	@for $i from $xui-layout-column-start through $xui-layout-columns {

		$suffix: "#{$i}-of-#{$xui-layout-columns}";
		$width: decimal-floor(100% / 12 * $i, 2);

		@if ($padded == false) {
			.#{$ns}-column-#{$suffix} {
				float: left;
				width: #{$width};
			}
		} @else {
			@if ($i < $xui-layout-columns) {
				.#{$ns}-row-grid > .#{$ns}-column-#{$suffix} {
					width: calc( (100% - (12/#{$i}) * #{$xui-s-large}) / 12 * #{$i} - 0.05px ); // Fix for Firefox which accumulates rounding errors
				}
			} @else {
				.#{$ns}-row-grid > .#{$ns}-column-#{$suffix} {
					width: calc( 100% - #{$xui-s-large} );
				}
			}
		}

	}

}

@mixin xui-page-width-and-spacing-standard {
	max-width: $xui-page-width-small;
	@include xui-margin-horizontal(auto);
	@include xui-column-width-generator(1, 1);
}

@mixin xui-page-width-and-spacing-large {
	max-width: $xui-page-width-large;
	@include xui-margin-horizontal(auto);
	@include xui-column-width-generator(1, 1);
}

@mixin xui-page-layout-sidebar-right($columns: 9, $columnmain: 6, $suffix: "") {
	.#{$ns}-page-layout-sidebar-right--main#{$suffix} {
		@include xui-column-width-generator($columns, $columnmain);
		display: inline-block;
		vertical-align: top;

		@include xui-breakpoint-narrow {
			@include xui-column-width-generator(1, 1);
		}
	}

	.#{$ns}-page-layout-sidebar-right--sidebar#{$suffix} {
		@include xui-margin-left($xui-grid-gutter);
		@include xui-column-width-generator($columns, ($columns - $columnmain), $xui-grid-gutter);
		display: inline-block;
		vertical-align: top;

		@include xui-breakpoint-narrow {
			@include xui-margin-left(0);
			@include xui-column-width-generator(1, 1);
		}
	}

}

@mixin xui-page-layout-sidebar-left($columns: 9, $columnmain: 6, $suffix: "") {
	.#{$ns}-page-layout-sidebar-left--sidebar#{$suffix} {
		@include xui-margin-right($xui-grid-gutter);
		@include xui-column-width-generator($columns, ($columns - $columnmain), $xui-grid-gutter);
		display: inline-block;
		vertical-align: top;

		@include xui-breakpoint-narrow {
			@include xui-margin-right(0);
			@include xui-column-width-generator(1, 1);
		}
	}

	.#{$ns}-page-layout-sidebar-left--main#{$suffix} {
		@include xui-column-width-generator($columns, $columnmain);
		display: inline-block;
		vertical-align: top;

		@include xui-breakpoint-narrow {
			@include xui-column-width-generator(1, 1);
		}
	}

}

@mixin xui-page-layout-split {
	.#{$ns}-page-layout-split-left {
		@include xui-margin-right($xui-grid-gutter / 2);
		@include xui-column-width-generator(2, 1, $xui-grid-gutter / 2);
		display: inline-block;
		vertical-align: top;

		@include xui-breakpoint-medium-and-narrow {
			@include xui-margin-right(0);
			@include xui-column-width-generator(1, 1);
		}
	}

	.#{$ns}-page-layout-split-right {
		@include xui-margin-left($xui-grid-gutter / 2);
		@include xui-column-width-generator(2, 1, $xui-grid-gutter / 2);
		display: inline-block;
		vertical-align: top;

		@include xui-breakpoint-medium-and-narrow {
			@include xui-margin-left(0);
			@include xui-column-width-generator(1, 1);
		}
	}

}
